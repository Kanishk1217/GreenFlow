<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>GreenFlow — Clean Energy Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700;9..40,800;9..40,900&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --g1:#083d2e;--g2:#0f5c44;--g3:#17885f;--g4:#22c55e;--g5:#4ade80;--g6:#bbf7d0;
  --bg:#f0faf5;--bg2:#e3f5ec;--bg3:#d4edd9;
  --white:#ffffff;--border:#c6e4d2;--border2:#a8d4bc;
  --txt:#081f17;--txt2:#1e5c3c;--txt3:#5a9070;--txt4:#8fbfa4;
  --sh:0 1px 14px rgba(8,61,46,.07);--shh:0 8px 40px rgba(8,61,46,.14);--shx:0 20px 60px rgba(8,61,46,.18);
  --r:14px;--rs:8px;
  --sb-w:260px;--sb-w-col:68px;
  --nav-h:62px;
  --trans:.28s cubic-bezier(.4,0,.2,1);
}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--white);color:var(--txt);overflow-x:hidden}

/* ══════════ TOPNAV (home only) ══════════ */
.topnav{
  position:fixed;top:0;left:0;right:0;z-index:400;height:var(--nav-h);
  padding:0 40px;display:flex;align-items:center;justify-content:space-between;
  background:rgba(255,255,255,.88);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);
  border-bottom:1px solid rgba(198,228,210,.5);transition:box-shadow var(--trans);
}
.topnav.shad{box-shadow:0 2px 24px rgba(8,61,46,.08)}
.brand{display:flex;align-items:center;gap:10px;cursor:pointer;text-decoration:none;user-select:none}
.brand-mark{
  width:34px;height:34px;border-radius:10px;flex-shrink:0;
  background:linear-gradient(135deg,var(--g2),var(--g4));
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 2px 10px rgba(34,197,94,.3);
}
.brand-name{font-size:1.05rem;font-weight:800;color:var(--g1);letter-spacing:-.4px}
.tnav-links{display:flex;align-items:center;gap:1px}
.tnl{
  padding:8px 16px;border-radius:8px;font-size:.875rem;font-weight:500;
  color:var(--txt2);cursor:pointer;border:none;background:none;
  transition:all .18s;font-family:'DM Sans',sans-serif;letter-spacing:-.1px;
}
.tnl:hover{background:var(--bg);color:var(--g1);font-weight:600}
.tnl.act{background:var(--bg2);color:var(--g1);font-weight:700}

/* Premium button styles */
.btn-prime{
  padding:10px 24px;border-radius:10px;font-size:.9rem;font-weight:700;
  background:linear-gradient(135deg,var(--g1) 0%,var(--g2) 45%,var(--g3) 100%);
  color:#fff;border:none;cursor:pointer;font-family:'DM Sans',sans-serif;
  letter-spacing:-.1px;transition:transform .22s,box-shadow .22s;
  box-shadow:0 3px 14px rgba(34,197,94,.3),inset 0 1px 0 rgba(255,255,255,.15);
  display:inline-flex;align-items:center;gap:7px;
  animation:glowPulse 3s ease-in-out infinite;
}
.btn-prime:hover{transform:translateY(-2px);box-shadow:0 6px 24px rgba(34,197,94,.48),inset 0 1px 0 rgba(255,255,255,.2);animation:none}
.btn-prime:active{transform:translateY(0);box-shadow:0 2px 10px rgba(34,197,94,.25);animation:none}

.btn-ghost{
  padding:10px 24px;border-radius:10px;font-size:.9rem;font-weight:600;
  background:rgba(255,255,255,.85);color:var(--g1);border:1.5px solid var(--border2);
  cursor:pointer;font-family:'DM Sans',sans-serif;letter-spacing:-.1px;
  transition:all .2s;display:inline-flex;align-items:center;gap:7px;
  backdrop-filter:blur(8px);
}
.btn-ghost:hover{background:#fff;border-color:var(--g4);transform:translateY(-2px);box-shadow:0 4px 16px rgba(8,61,46,.1)}
.btn-ghost:active{transform:translateY(0)}

.btn-sm{
  padding:8px 18px;border-radius:9px;font-size:.82rem;font-weight:700;
  background:linear-gradient(135deg,var(--g2),var(--g4));color:#fff;
  border:none;cursor:pointer;font-family:'DM Sans',sans-serif;letter-spacing:-.1px;
  transition:transform .2s,box-shadow .2s;box-shadow:0 2px 10px rgba(34,197,94,.25);
  display:inline-flex;align-items:center;gap:6px;
}
.btn-sm:hover{transform:translateY(-2px);box-shadow:0 5px 18px rgba(34,197,94,.42)}
.btn-sm:active{transform:translateY(0)}

.btn-sm-o{
  padding:8px 18px;border-radius:9px;font-size:.82rem;font-weight:600;
  background:var(--white);color:var(--g2);border:1.5px solid var(--border);
  cursor:pointer;font-family:'DM Sans',sans-serif;transition:all .2s;
}
.btn-sm-o:hover{border-color:var(--g4);color:var(--g2);background:var(--bg);transform:translateY(-1px)}

/* ══════════ PAGE SYSTEM ══════════ */
.page{display:none}
.page.active{display:block;animation:pageIn .3s ease both}
@keyframes pageIn{from{opacity:0}to{opacity:1}}

/* ══════════════════════════════════════
   HOME PAGE
══════════════════════════════════════ */
.home{padding-top:var(--nav-h)}

/* HERO */
.hero{
  min-height:calc(100vh - var(--nav-h));
  background:#f8fefb;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  position:relative;overflow:hidden;padding:60px 24px 80px;text-align:center;
}
/* Rich mesh gradient background */
.hero::before{
  content:'';position:absolute;inset:0;
  background:
    radial-gradient(ellipse 80% 60% at 70% -10%, rgba(34,197,94,.13) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at -10% 80%, rgba(23,136,95,.1) 0%, transparent 55%),
    radial-gradient(ellipse 40% 40% at 85% 85%, rgba(74,222,128,.08) 0%, transparent 50%),
    radial-gradient(ellipse 50% 60% at 15% 20%, rgba(187,247,208,.15) 0%, transparent 55%),
    linear-gradient(170deg,#f0fdf7 0%,#eafaf3 40%,#f5fffe 70%,#fafffe 100%);
  pointer-events:none;
}
/* Noise texture overlay for depth */
.hero::after{
  content:'';position:absolute;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
  background-size:200px 200px;
  pointer-events:none;opacity:.4;
}
/* Floating light orbs — softer and more refined */
.orb{position:absolute;border-radius:50%;pointer-events:none;will-change:transform}
.orb1{
  width:640px;height:640px;
  background:radial-gradient(circle at 40% 40%,rgba(34,197,94,.09),transparent 65%);
  top:-180px;right:-160px;filter:blur(40px);
  animation:orbA 16s ease-in-out infinite;
}
.orb2{
  width:480px;height:480px;
  background:radial-gradient(circle at 60% 60%,rgba(15,92,68,.07),transparent 65%);
  bottom:-120px;left:-120px;filter:blur(50px);
  animation:orbA 12s ease-in-out infinite reverse 1s;
}
.orb3{
  width:300px;height:300px;
  background:radial-gradient(circle,rgba(74,222,128,.07),transparent 70%);
  top:35%;left:5%;filter:blur(30px);
  animation:orbA 9s ease-in-out infinite 3s;
}
.orb4{
  width:200px;height:200px;
  background:radial-gradient(circle,rgba(34,197,94,.06),transparent 70%);
  top:20%;right:12%;filter:blur(25px);
  animation:orbA 11s ease-in-out infinite reverse 5s;
}
@keyframes orbA{
  0%,100%{transform:translate(0,0) scale(1)}
  25%{transform:translate(18px,-22px) scale(1.04)}
  50%{transform:translate(-14px,16px) scale(.97)}
  75%{transform:translate(10px,8px) scale(1.02)}
}
/* Elegant floating dots — smaller, subtler */
.hero-dots{position:absolute;inset:0;pointer-events:none;z-index:1}
.hdot{
  position:absolute;border-radius:50%;
  background:rgba(34,197,94,.22);
  animation:hdotF ease-in-out infinite;
  will-change:transform,opacity;
}
@keyframes hdotF{0%,100%{transform:translateY(0) scale(1);opacity:.2}50%{transform:translateY(-12px) scale(1.15);opacity:.55}}
/* Decorative grid lines — very subtle */
.hero-grid{
  position:absolute;inset:0;pointer-events:none;z-index:0;
  background-image:
    linear-gradient(rgba(34,197,94,.04) 1px,transparent 1px),
    linear-gradient(90deg,rgba(34,197,94,.04) 1px,transparent 1px);
  background-size:60px 60px;
  mask-image:radial-gradient(ellipse 80% 70% at 50% 50%,black 20%,transparent 100%);
}
/* Watermark SVG shapes */
.wm-tl{position:absolute;top:-50px;left:-50px;opacity:.055;pointer-events:none;animation:wmDrift 28s ease-in-out infinite}
.wm-tr{position:absolute;top:6%;right:4%;opacity:.06;pointer-events:none;animation:wmDrift 20s ease-in-out infinite reverse 4s}
@keyframes wmDrift{0%,100%{transform:rotate(0deg) scale(1)}33%{transform:rotate(6deg) scale(1.04)}66%{transform:rotate(-4deg) scale(.97)}}

.hero-inner{position:relative;z-index:2;max-width:720px}
.hero-pill{
  display:inline-flex;align-items:center;gap:8px;
  background:rgba(255,255,255,.9);border:1px solid rgba(34,197,94,.2);
  backdrop-filter:blur(16px);padding:6px 16px 6px 10px;border-radius:40px;
  font-size:.76rem;font-weight:600;color:var(--txt2);margin-bottom:30px;
  box-shadow:0 1px 20px rgba(8,61,46,.06),0 0 0 1px rgba(255,255,255,.8) inset;
  opacity:0;animation:fadeUp .65s .06s ease forwards;
}
.pill-dot{width:7px;height:7px;border-radius:50%;background:var(--g4);
  box-shadow:0 0 0 3px rgba(34,197,94,.2);
  animation:pulseDot 2.4s ease-in-out infinite}
@keyframes pulseDot{0%,100%{transform:scale(1);box-shadow:0 0 0 3px rgba(34,197,94,.2)}50%{transform:scale(1.3);box-shadow:0 0 0 5px rgba(34,197,94,.08)}}
.hero-h1{
  font-size:clamp(4.4rem,9.5vw,7.2rem);font-weight:900;
  background:linear-gradient(140deg,var(--g1) 0%,var(--g2) 35%,var(--g3) 65%,#16a34a 85%,var(--g4) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  letter-spacing:-6px;line-height:.92;margin-bottom:20px;
  opacity:0;animation:fadeUp .75s .14s ease forwards;
}
.hero-rule{
  width:80px;height:3px;border-radius:3px;margin:0 auto 24px;
  background:linear-gradient(90deg,var(--g2),var(--g4),var(--g5));
  opacity:0;animation:scaleIn .8s .26s ease forwards;
  box-shadow:0 2px 8px rgba(34,197,94,.3);
}
@keyframes scaleIn{from{opacity:0;transform:scaleX(0)}to{opacity:1;transform:scaleX(1)}}
.hero-sub{
  font-size:1rem;color:var(--txt2);line-height:1.72;
  max-width:540px;margin:0 auto 40px;font-weight:400;letter-spacing:.01em;
  opacity:0;animation:fadeUp .75s .34s ease forwards;
}
.hero-actions{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;opacity:0;animation:fadeUp .75s .44s ease forwards}

/* Button shimmer sweep animation */
.btn-prime{position:relative;overflow:hidden}
.btn-prime::before{
  content:'';position:absolute;top:0;left:-120%;width:60%;height:100%;
  background:linear-gradient(120deg,transparent,rgba(255,255,255,.28),transparent);
  transition:left .5s ease;pointer-events:none;border-radius:inherit;
}
.btn-prime:hover::before{left:160%}
/* Subtle glow pulse on primary buttons */
@keyframes glowPulse{0%,100%{box-shadow:0 3px 14px rgba(34,197,94,.28),inset 0 1px 0 rgba(255,255,255,.15)}50%{box-shadow:0 5px 24px rgba(34,197,94,.48),inset 0 1px 0 rgba(255,255,255,.22)}}

/* Page entrance */
@keyframes pageIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* ── SECTIONS (home page only) ── */
.section{padding:88px 40px;max-width:1080px;margin:0 auto}
.section-bg{background:var(--bg)}
.sec-lbl{font-size:.7rem;font-weight:700;color:var(--g4);text-transform:uppercase;letter-spacing:2px;margin-bottom:10px;display:block}
.sec-h{font-size:clamp(1.75rem,3.5vw,2.4rem);font-weight:800;color:var(--g1);line-height:1.12;margin-bottom:12px;letter-spacing:-.6px}
.sec-p{font-size:.93rem;color:var(--txt2);line-height:1.68;max-width:500px}
.sec-ctr{text-align:center}.sec-ctr .sec-p{margin:0 auto}

/* Stats row */
.stats-row{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
.stat-c{
  background:var(--white);border:1px solid var(--border);border-radius:20px;
  padding:36px 28px;text-align:center;
  box-shadow:0 1px 20px rgba(8,61,46,.06);
  transition:all .32s cubic-bezier(.4,0,.2,1);cursor:default;position:relative;overflow:hidden;
}
.stat-c::before{
  content:'';position:absolute;inset:0;border-radius:inherit;
  background:linear-gradient(135deg,var(--bg2),transparent 60%);
  opacity:0;transition:opacity .32s;
}
.stat-c:hover::before{opacity:1}
.stat-c:hover{transform:translateY(-5px);box-shadow:0 12px 40px rgba(8,61,46,.12);border-color:var(--border2)}
.stat-ico{display:flex;justify-content:center;margin-bottom:16px;color:var(--g3)}
.stat-n{font-size:2.8rem;font-weight:900;color:var(--g1);letter-spacing:-3px;line-height:1;margin-bottom:7px}
.stat-l{font-size:.82rem;color:var(--txt3);font-weight:500}

/* How it works */
.steps{display:grid;grid-template-columns:repeat(4,1fr);gap:0;position:relative}
.steps::after{content:'';position:absolute;top:24px;left:12%;right:12%;height:1px;
  background:linear-gradient(90deg,transparent,var(--g4) 20%,var(--g3) 80%,transparent);
  opacity:.18;z-index:0}
.step{padding:0 20px;text-align:center;z-index:1}
.step-n{
  width:48px;height:48px;border-radius:50%;margin:0 auto 16px;
  background:linear-gradient(135deg,var(--g2),var(--g4));
  display:flex;align-items:center;justify-content:center;
  font-size:1rem;font-weight:800;color:#fff;
  box-shadow:0 4px 16px rgba(34,197,94,.32);
  transition:transform .25s,box-shadow .25s;
}
.step:hover .step-n{transform:translateY(-3px) scale(1.08);box-shadow:0 8px 24px rgba(34,197,94,.42)}
.step h3{font-size:.9rem;font-weight:700;color:var(--g1);margin-bottom:7px}
.step p{font-size:.79rem;color:var(--txt2);line-height:1.55}

/* Contact */
.contact-form{
  background:var(--white);border:1px solid var(--border);border-radius:20px;
  padding:40px;box-shadow:var(--sh);max-width:560px;margin:0 auto;
}
.fg{margin-bottom:12px}
.fg label{display:block;font-size:.76rem;font-weight:600;color:var(--txt2);margin-bottom:5px}
.fg input,.fg textarea,.fg select{
  width:100%;background:var(--bg);border:1.5px solid var(--border);
  color:var(--txt);border-radius:8px;padding:9px 13px;
  font-size:.875rem;font-family:'DM Sans',sans-serif;outline:none;
  transition:border .2s,box-shadow .2s;
}
.fg input:focus,.fg textarea:focus,.fg select:focus{border-color:var(--g4);box-shadow:0 0 0 3px rgba(34,197,94,.08)}
.fg textarea{resize:vertical;min-height:100px}
.fg-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}

/* Footer */
.footer{background:var(--g1);color:rgba(255,255,255,.75);padding:52px 40px 28px}
.foot-in{max-width:1060px;margin:0 auto}
.foot-grid{display:grid;grid-template-columns:2.2fr 1fr 1fr 1fr;gap:40px;margin-bottom:36px}
.foot-brand h3{font-size:1rem;font-weight:800;color:#fff;margin-bottom:5px;display:flex;align-items:center;gap:8px}
.foot-brand p{font-size:.8rem;line-height:1.6}
.foot-col h4{font-size:.68rem;font-weight:700;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:12px}
.foot-col a{display:block;font-size:.8rem;color:rgba(255,255,255,.55);margin-bottom:7px;cursor:pointer;transition:color .18s;text-decoration:none}
.foot-col a:hover{color:var(--g5)}
.foot-bot{border-top:1px solid rgba(255,255,255,.08);padding-top:22px;text-align:center;font-size:.72rem;opacity:.38}

/* ══════════════════════════════════════
   INNER APP LAYOUT (sidebar + content)
══════════════════════════════════════ */
.app-shell{
  display:flex;padding-top:var(--nav-h);min-height:100vh;
  background:var(--bg);
}

/* ── SIDEBAR ── */
.sidebar{
  position:fixed;top:var(--nav-h);left:0;bottom:0;
  width:var(--sb-w);z-index:200;
  background:var(--white);border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  transition:width var(--trans),box-shadow var(--trans);
  overflow:hidden;
}
.sidebar.collapsed{width:var(--sb-w-col)}
.sidebar.collapsed .sb-label,
.sidebar.collapsed .sb-group-lbl,
.sidebar.collapsed .sb-badge{opacity:0;pointer-events:none;width:0;overflow:hidden;margin:0}
.sidebar.collapsed .sb-item{justify-content:center;padding:12px 0}
.sidebar.collapsed .sb-item .sb-ico{margin:0}
.sidebar.collapsed .sb-toggle-btn{justify-content:center}
.sidebar.collapsed .sb-brand-txt{opacity:0;pointer-events:none;width:0;overflow:hidden}

/* Sidebar header */
.sb-header{
  height:56px;display:flex;align-items:center;
  padding:0 16px;border-bottom:1px solid var(--border);
  gap:10px;flex-shrink:0;
}
.sb-brand-ico{width:30px;height:30px;border-radius:8px;flex-shrink:0;background:linear-gradient(135deg,var(--g2),var(--g4));display:flex;align-items:center;justify-content:center}
.sb-brand-txt{font-size:.95rem;font-weight:800;color:var(--g1);letter-spacing:-.3px;white-space:nowrap;transition:opacity var(--trans),width var(--trans)}

/* Toggle button */
.sb-toggle-btn{
  margin-left:auto;flex-shrink:0;
  width:28px;height:28px;border-radius:7px;
  background:var(--bg);border:1px solid var(--border);
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all .2s;color:var(--txt2);
}
.sidebar.collapsed .sb-toggle-btn{margin:0}
.sb-toggle-btn:hover{background:var(--bg2);border-color:var(--g4);color:var(--g2)}

/* Sidebar nav */
.sb-nav{flex:1;padding:10px 10px;overflow-y:auto;overflow-x:hidden}
.sb-nav::-webkit-scrollbar{width:3px}
.sb-nav::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.sb-group-lbl{
  font-size:.64rem;font-weight:700;color:var(--txt4);
  text-transform:uppercase;letter-spacing:1.5px;
  padding:14px 8px 5px;white-space:nowrap;
  transition:opacity var(--trans),width var(--trans);
}
.sb-item{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:10px;cursor:pointer;
  font-size:.875rem;font-weight:500;color:var(--txt2);
  transition:all .18s;margin-bottom:2px;border:none;
  background:none;width:100%;text-align:left;
  font-family:'DM Sans',sans-serif;white-space:nowrap;
  position:relative;overflow:hidden;
}
.sb-item::before{
  content:'';position:absolute;inset:0;border-radius:10px;
  background:linear-gradient(135deg,var(--bg2),var(--bg3));
  opacity:0;transition:opacity .18s;
}
.sb-item:hover::before{opacity:1}
.sb-item:hover{color:var(--g1)}
.sb-item.active{background:linear-gradient(135deg,var(--bg2),var(--bg3));color:var(--g1);font-weight:700;box-shadow:inset 2px 0 0 var(--g4)}
.sb-item.active::before{opacity:0}
.sb-ico{
  width:34px;height:34px;border-radius:9px;display:flex;align-items:center;
  justify-content:center;flex-shrink:0;position:relative;z-index:1;
  transition:all .18s;
}
.sb-item:hover .sb-ico,.sb-item.active .sb-ico{background:var(--white);box-shadow:0 1px 8px rgba(8,61,46,.1)}
.sb-label{font-weight:inherit;position:relative;z-index:1;transition:opacity var(--trans),width var(--trans);white-space:nowrap}
.sb-badge{
  margin-left:auto;background:var(--g4);color:#fff;
  font-size:.6rem;padding:2px 7px;border-radius:20px;font-weight:700;
  flex-shrink:0;position:relative;z-index:1;white-space:nowrap;
  transition:opacity var(--trans),width var(--trans);
}

/* Sidebar footer */
.sb-footer{border-top:1px solid var(--border);padding:12px 10px;flex-shrink:0}
.sb-footer-txt{font-size:.68rem;color:var(--txt4);padding:6px 8px;white-space:nowrap;transition:opacity var(--trans)}
.sidebar.collapsed .sb-footer-txt{opacity:0}

/* ── SIDEBAR FEATURE CARDS ── */
.sb-feat-card{
  margin:4px 0 8px;display:flex;flex-direction:column;gap:3px;
  transition:opacity var(--trans);
}
.sidebar.collapsed .sb-feat-card{opacity:0;pointer-events:none;height:0;overflow:hidden;margin:0}
.sb-feat-item{
  display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:9px;
  background:var(--bg);border:1px solid var(--border);
  transition:all .2s;cursor:default;
}
.sb-feat-item:hover{background:var(--bg2);border-color:var(--border2);transform:translateX(2px)}
.sb-feat-ico{
  width:28px;height:28px;border-radius:7px;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;
}
.sb-feat-txt{display:flex;flex-direction:column;gap:1px;min-width:0}
.sb-feat-name{font-size:.76rem;font-weight:700;color:var(--g1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sb-feat-sub{font-size:.62rem;color:var(--txt4);white-space:nowrap}

/* ── APP CONTENT ── */
.app-content{
  flex:1;margin-left:var(--sb-w);
  transition:margin-left var(--trans);
  min-height:100vh;
  display:flex;flex-direction:column;
}
.app-content.expanded{margin-left:var(--sb-w-col)}

/* Inner topbar */
.ibar{
  height:52px;background:var(--white);border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px;flex-shrink:0;position:sticky;top:var(--nav-h);z-index:100;
}
.ibar-left{display:flex;align-items:center;gap:12px}
.mob-sb-btn{
  display:none;background:var(--bg);border:1.5px solid var(--border);
  width:34px;height:34px;border-radius:8px;cursor:pointer;
  align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;
}
.mob-sb-btn:hover{background:var(--bg2);border-color:var(--g4)}
@media(max-width:700px){.mob-sb-btn{display:flex}}
.ibar h2{font-size:.95rem;font-weight:700;color:var(--g1);letter-spacing:-.2px}
.badge-live{display:inline-flex;align-items:center;gap:5px;background:var(--bg2);border:1px solid var(--border);padding:4px 10px;border-radius:20px;font-size:.7rem;font-weight:600;color:var(--txt2)}
.ldot{width:6px;height:6px;border-radius:50%;background:var(--g4);animation:ldotP 2s infinite;display:inline-block}
@keyframes ldotP{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.3;transform:scale(1.5)}}

.ibody{padding:24px 28px;flex:1}

/* ── DASHBOARD CARDS ── */
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:18px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:18px}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.dc{
  background:var(--white);border:1px solid var(--border);border-radius:var(--r);
  padding:20px;box-shadow:var(--sh);transition:all .22s;
}
.dc:hover{box-shadow:0 4px 20px rgba(8,61,46,.1);border-color:var(--border2)}
.dl{font-size:.66rem;font-weight:700;color:var(--txt4);text-transform:uppercase;letter-spacing:.9px;margin-bottom:5px}
.dv{font-size:1.75rem;font-weight:800;color:var(--g1);letter-spacing:-.6px}
.ds{font-size:.73rem;color:var(--g4);font-weight:600;margin-top:3px}
.dc h3{font-size:.88rem;font-weight:700;color:var(--g1);margin-bottom:14px;letter-spacing:-.2px}

/* Flow bars */
.br{display:flex;align-items:center;gap:10px;margin-bottom:9px}
.bl{width:86px;font-size:.74rem;color:var(--txt2);font-weight:500;flex-shrink:0}
.btr{flex:1;height:6px;background:var(--bg2);border-radius:6px;overflow:hidden}
.bfi{height:100%;border-radius:6px;background:linear-gradient(90deg,var(--g2),var(--g4));transition:width 1s ease}
.bpc{font-size:.7rem;color:var(--txt4);width:28px;text-align:right;font-weight:600}

/* ── GARDEN ── */
.g-filter{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:14px}
.gtag{
  padding:6px 14px;border-radius:20px;font-size:.76rem;font-weight:600;
  cursor:pointer;border:1.5px solid var(--border);color:var(--txt2);
  background:var(--white);transition:all .18s;font-family:'DM Sans',sans-serif;
}
.gtag:hover,.gtag.on{background:var(--bg2);border-color:var(--g4);color:var(--g1)}

.cat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:9px;margin-bottom:20px}
.ccard{
  background:var(--white);border:1.5px solid var(--border);border-radius:12px;
  padding:13px 9px;text-align:center;cursor:pointer;
  transition:all .22s;
}
.ccard:hover{border-color:var(--g4);transform:translateY(-2px);box-shadow:0 4px 16px rgba(8,61,46,.1)}
.ce{font-size:1.8rem;margin-bottom:5px;line-height:1}
.cn{font-size:.7rem;font-weight:600;color:var(--g1)}
.ct{font-size:.6rem;color:var(--txt4);margin-top:2px}

.gg{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:12px}
.gp{background:var(--white);border:1.5px solid var(--border);border-radius:var(--r);padding:15px;position:relative;transition:all .22s}
.gp:hover{border-color:rgba(34,197,94,.35);box-shadow:var(--sh)}
.gpt{display:flex;align-items:center;gap:9px;margin-bottom:10px}
.gpe{font-size:1.6rem;line-height:1}
.gpi h4{font-size:.82rem;font-weight:700;color:var(--g1)}
.gpi p{font-size:.66rem;color:var(--txt4)}
.gpbar{height:4px;background:var(--bg2);border-radius:4px;margin:7px 0;overflow:hidden}
.gpfi{height:100%;border-radius:4px;background:linear-gradient(90deg,var(--g2),var(--g4));transition:width .6s ease}
.gpb{display:inline-block;padding:2px 8px;border-radius:20px;font-size:.62rem;font-weight:600}
.bs{background:#fef3c7;color:#92400e}.bp{background:#dcfce7;color:#166534}.bg{background:#d1fae5;color:#065f46}.bh{background:#ffedd5;color:#9a3412}
.gpw{font-size:.68rem;color:var(--g2);font-weight:600;margin-top:6px}
.gprm{position:absolute;top:9px;right:9px;background:none;border:none;color:var(--txt4);cursor:pointer;width:22px;height:22px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .18s;font-size:.75rem}
.gprm:hover{background:#fee2e2;color:#dc2626}
.gpadv{width:100%;margin-top:8px;padding:6px;border-radius:8px;font-size:.73rem;font-weight:600;background:var(--bg);color:var(--g1);border:1.5px solid var(--border);cursor:pointer;font-family:'DM Sans',sans-serif;transition:all .18s}
.gpadv:hover{background:var(--bg2);border-color:var(--g4)}
.empty-s{text-align:center;padding:44px 20px;color:var(--txt4)}
.empty-s .ei{font-size:2.5rem;margin-bottom:10px}
.empty-s h4{font-size:.9rem;font-weight:600;color:var(--txt2);margin-bottom:4px}
.empty-s p{font-size:.78rem}

/* ── STORE ── */
.store-hero{
  background:linear-gradient(135deg,#eafaf2,#d4edd9);border:1px solid var(--border);
  border-radius:18px;padding:36px 28px;text-align:center;margin-bottom:22px;
}
.store-hero h2{font-size:1.7rem;font-weight:800;color:var(--g1);margin-bottom:7px;letter-spacing:-.6px}
.store-hero p{font-size:.875rem;color:var(--txt2);max-width:440px;margin:0 auto}
.pkg-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.pkg{background:var(--white);border:1.5px solid var(--border);border-radius:16px;padding:24px 20px;display:flex;flex-direction:column;position:relative;transition:all .25s}
.pkg:hover{transform:translateY(-3px);box-shadow:var(--shh)}
.pkg.best{border-color:var(--g4);box-shadow:0 0 0 2px rgba(34,197,94,.1)}
.ptag{position:absolute;top:-11px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--g2),var(--g4));color:#fff;padding:3px 14px;border-radius:20px;font-size:.66rem;font-weight:800;white-space:nowrap}
.pname{font-size:.67rem;font-weight:700;color:var(--txt4);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:6px}
.pprice{font-size:1.8rem;font-weight:800;color:var(--g1);letter-spacing:-.6px}
.pprice span{font-size:.8rem;font-weight:400;color:var(--txt4)}
.pdesc{font-size:.79rem;color:var(--txt2);margin:7px 0 13px;line-height:1.5}
.pcnt{background:var(--bg);border:1px solid var(--border);border-radius:9px;padding:11px;text-align:center;margin-bottom:16px}
.pcnt .pn{font-size:1.9rem;font-weight:800;color:var(--g1);letter-spacing:-.5px}
.pcnt p{font-size:.67rem;color:var(--txt4);font-weight:500;margin-top:2px}
.plist{list-style:none;margin-bottom:18px;flex:1}
.plist li{font-size:.78rem;color:var(--txt2);padding:5px 0;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:7px}
.plist li:last-child{border:none}
.plist li::before{content:"✓";color:var(--g4);font-weight:800;flex-shrink:0}
.pbtn{width:100%;padding:11px;border-radius:10px;font-size:.85rem;font-weight:700;cursor:pointer;border:none;font-family:'DM Sans',sans-serif;transition:all .2s;letter-spacing:-.1px;position:relative;overflow:hidden}
.pbtn-o{background:var(--white);color:var(--g2);border:1.5px solid var(--border)}
.pbtn-o:hover{border-color:var(--g4);background:var(--bg);transform:translateY(-1px)}
.pbtn-g{background:linear-gradient(135deg,var(--g2),var(--g4));color:#fff;box-shadow:0 3px 12px rgba(34,197,94,.28)}
.pbtn-g::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.15),transparent);pointer-events:none}
.pbtn-g:hover{box-shadow:0 5px 18px rgba(34,197,94,.42);transform:translateY(-2px)}

/* ── CHATBOT ── */
.chat-wrap{display:flex;gap:14px;height:calc(100vh - 178px)}
.chat-side{width:195px;flex-shrink:0}
.chat-main{flex:1;display:flex;flex-direction:column}
.ctopic{width:100%;text-align:left;padding:8px 11px;border-radius:8px;background:var(--white);border:1.5px solid var(--border);color:var(--txt2);cursor:pointer;font-size:.76rem;font-family:'DM Sans',sans-serif;margin-bottom:5px;transition:all .18s;font-weight:500}
.ctopic:hover{border-color:var(--g4);color:var(--g1);background:var(--bg)}
.msgs{flex:1;overflow-y:auto;padding:15px;background:var(--white);border:1.5px solid var(--border);border-radius:12px 12px 0 0;display:flex;flex-direction:column;gap:12px}
.msgs::-webkit-scrollbar{width:3px}
.msgs::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.msg{display:flex;gap:8px;max-width:78%}
.msg.u{align-self:flex-end;flex-direction:row-reverse}
.mav{width:27px;height:27px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.7rem;flex-shrink:0;font-weight:700}
.mav.ai{background:linear-gradient(135deg,var(--g2),var(--g4));color:#fff}
.mav.u{background:var(--bg2);border:1.5px solid var(--border);color:var(--g2);font-size:.8rem}
.mbub{padding:10px 14px;border-radius:11px;font-size:.82rem;line-height:1.5;color:var(--txt)}
.msg.ai .mbub{background:var(--bg);border:1px solid var(--border);border-radius:3px 11px 11px 11px}
.msg.u .mbub{background:var(--bg2);border:1px solid rgba(34,197,94,.18);border-radius:11px 3px 11px 11px}
.mtime{font-size:.59rem;color:var(--txt4);margin-top:2px}
.typing{display:flex;gap:3px;padding:2px 0}
.typing span{width:5px;height:5px;border-radius:50%;background:var(--g4);animation:tb 1.2s infinite}
.typing span:nth-child(2){animation-delay:.2s}.typing span:nth-child(3){animation-delay:.4s}
@keyframes tb{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-7px)}}
.cinp{display:flex;gap:8px;padding:10px;background:var(--white);border:1.5px solid var(--border);border-top:none;border-radius:0 0 12px 12px}
.cinp input{flex:1;background:var(--bg);border:1.5px solid var(--border);color:var(--txt);border-radius:8px;padding:8px 12px;font-size:.83rem;font-family:'DM Sans',sans-serif;outline:none;transition:all .18s}
.cinp input:focus{border-color:var(--g4);box-shadow:0 0 0 3px rgba(34,197,94,.08)}

/* ── MODALS ── */
.mover{position:fixed;inset:0;background:rgba(0,0,0,.32);z-index:600;display:flex;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(5px);animation:mfade .2s ease}
@keyframes mfade{from{opacity:0}to{opacity:1}}
.modal{background:var(--white);border:1px solid var(--border);border-radius:18px;width:100%;max-width:450px;padding:26px;position:relative;box-shadow:var(--shx);animation:mslide .25s ease}
@keyframes mslide{from{opacity:0;transform:translateY(16px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
.modal h3{font-size:.95rem;font-weight:800;color:var(--g1);margin-bottom:15px;letter-spacing:-.2px}
.mcls{position:absolute;top:12px;right:12px;background:var(--bg);border:none;width:26px;height:26px;border-radius:6px;cursor:pointer;font-size:.8rem;color:var(--g1);display:flex;align-items:center;justify-content:center;transition:all .18s}
.mcls:hover{background:var(--bg2)}

/* Payment modal */
.pnote{background:#fefce8;border:1px solid #fde68a;border-radius:7px;padding:8px 12px;font-size:.72rem;color:#92400e;margin-bottom:11px}
.ord{background:var(--bg);border:1px solid var(--border);border-radius:9px;padding:11px;margin-bottom:12px}
.ord h4{font-size:.66rem;font-weight:700;color:var(--txt4);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
.orow{display:flex;justify-content:space-between;font-size:.78rem;color:var(--txt2);padding:2px 0}
.otot{font-weight:700;color:var(--g1);font-size:.86rem;border-top:1px solid var(--border);margin-top:6px;padding-top:6px}
.succ{text-align:center;padding:10px 0}
.succ .si{font-size:2.4rem;margin-bottom:9px}
.succ h3{color:var(--g1);margin-bottom:6px}
.succ p{font-size:.78rem;color:var(--txt2);line-height:1.5}

/* ── REVEAL ── */
.rv{opacity:0;transform:translateY(16px);transition:opacity .55s ease,transform .55s ease}
.rv.vis{opacity:1;transform:translateY(0)}

/* ── TOAST ── */
.toast-el{position:fixed;bottom:22px;right:22px;z-index:9999;background:var(--white);border:1.5px solid var(--g4);border-radius:11px;padding:11px 17px;font-size:.83rem;color:var(--txt);box-shadow:var(--shh);display:flex;align-items:center;gap:8px;max-width:280px;animation:toastIn .25s ease}
@keyframes toastIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* ── MOBILE SIDEBAR OVERLAY BG ── */
.mob-sb-overlay{
  display:none;position:fixed;inset:0;z-index:499;
  background:rgba(0,0,0,.3);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
  opacity:0;transition:opacity .25s;pointer-events:none;
}
.mob-sb-overlay.vis{display:block;opacity:1;pointer-events:auto}

/* ── HAMBURGER ── */
.hamburger{
  display:none;background:none;border:1.5px solid var(--border);
  width:38px;height:38px;border-radius:9px;cursor:pointer;
  align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;
}
.hamburger:hover{background:var(--bg);border-color:var(--g4)}

/* ── MOBILE MENU OVERLAY ── */
.mob-menu{
  display:none;position:fixed;top:var(--nav-h);left:0;right:0;bottom:0;z-index:350;
  background:rgba(0,0,0,.3);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
  opacity:0;transition:opacity .25s;pointer-events:none;
}
.mob-menu.open{opacity:1;pointer-events:auto}
.mob-menu-inner{
  background:var(--white);border-bottom:1px solid var(--border);
  padding:16px 20px 24px;box-shadow:0 8px 32px rgba(8,61,46,.12);
  max-height:calc(100vh - var(--nav-h));overflow-y:auto;
}
.mob-section-lbl{
  font-size:.62rem;font-weight:700;color:var(--txt4);text-transform:uppercase;
  letter-spacing:1.5px;padding:12px 0 6px;
}
.mob-item{
  display:block;width:100%;text-align:left;padding:12px 14px;border-radius:10px;
  font-size:.9rem;font-weight:500;color:var(--txt2);background:none;border:none;
  cursor:pointer;font-family:'DM Sans',sans-serif;transition:all .18s;
}
.mob-item:hover,.mob-item:active{background:var(--bg2);color:var(--g1);font-weight:600}

/* ── RESPONSIVE ── */
@media(max-width:1024px){
  .g4{grid-template-columns:1fr 1fr}
  .pkg-grid{grid-template-columns:1fr 1fr}
  .steps,.stats-row{grid-template-columns:1fr 1fr}
  .steps::after{display:none}
}
@media(max-width:700px){
  .g4,.pkg-grid,.g3,.stats-row{grid-template-columns:1fr}
  .section{padding:60px 20px}
  .ibody{padding:16px 14px}
  .foot-grid{grid-template-columns:1fr 1fr}
  .topnav{padding:0 14px}
  .tnav-links{display:none}
  .tn-dash{display:none}
  .hamburger{display:flex}
  .mob-menu{display:block}
  /* Sidebar becomes slide-in overlay on mobile */
  .sidebar{
    position:fixed;top:0;left:0;bottom:0;z-index:500;
    width:280px;transform:translateX(-100%);
    transition:transform .3s cubic-bezier(.4,0,.2,1);
    box-shadow:none;border-right:none;padding-top:0;
  }
  .sidebar.mob-open{transform:translateX(0);box-shadow:8px 0 40px rgba(8,61,46,.18)}
  .sidebar .sb-header{height:var(--nav-h)}
  .app-content{margin-left:0!important}
  /* Chat layout stack on mobile */
  .chat-wrap{flex-direction:column;height:auto}
  .chat-side{width:100%;display:flex;gap:6px;flex-wrap:wrap}
  .chat-side .dc{padding:8px;display:flex;gap:6px;flex-wrap:wrap;flex-direction:row}
  .chat-side .dc > div{display:none}
  .chat-side .ctopic{width:auto;margin:0}
  .msgs{min-height:320px}
  .hero-h1{font-size:clamp(3rem,12vw,4.5rem);letter-spacing:-3px}
  .hero-sub{font-size:.88rem}
  .pkg-grid{gap:14px}
  .g2{grid-template-columns:1fr}
  .cat-grid{grid-template-columns:repeat(auto-fill,minmax(80px,1fr))}
  .gg{grid-template-columns:1fr}
  .store-hero h2{font-size:1.3rem}
  .ibar{padding:0 14px;flex-wrap:wrap;gap:8px;height:auto;padding:10px 14px}
}
@media(max-width:400px){
  .foot-grid{grid-template-columns:1fr}
  .hero-actions{flex-direction:column;align-items:center}
  .hero-actions .btn-prime,.hero-actions .btn-ghost{width:100%;justify-content:center}
}
</style>
</head>
<body>

<!-- ══════════ TOPNAV ══════════ -->
<header class="topnav" id="topnav">
  <div class="brand" onclick="goHome()">
    <div class="brand-mark">
      <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22V12"/><path d="M12 12C12 7 7 3 2 5c3 3 5 7 10 7z"/><path d="M12 12c0-5 5-9 10-7-3 3-5 7-10 7z"/></svg>
    </div>
    <span class="brand-name">GreenFlow</span>
  </div>

  <nav class="tnav-links" id="tnav">
    <button class="tnl act" onclick="goHome()">Home</button>
    <button class="tnl" onclick="goHomeAndScroll('how-sec')">How It Works</button>
    <button class="tnl" onclick="goHomeAndScroll('contact-sec')">Contact</button>
  </nav>

  <button class="btn-prime tn-dash" onclick="goApp('dashboard',null)" style="padding:8px 20px;font-size:.85rem">
    View Dashboard
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
  </button>
  <button class="hamburger" id="hamBtn" onclick="toggleMobileMenu()">
    <svg id="hamIco" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--g1)" stroke-width="2.2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
  </button>
</header>

<!-- MOBILE MENU OVERLAY -->
<div class="mob-menu" id="mobMenu">
  <div class="mob-menu-inner">
    <div class="mob-section-lbl">Navigation</div>
    <button class="mob-item" onclick="goHome();closeMobMenu()">Home</button>
    <button class="mob-item" onclick="closeMobMenu();goHomeAndScroll('how-sec')">How It Works</button>
    <button class="mob-item" onclick="closeMobMenu();goHomeAndScroll('contact-sec')">Contact</button>
    <div class="mob-section-lbl">App</div>
    <button class="mob-item" onclick="goApp('dashboard',null);closeMobMenu()">Dashboard</button>
    <button class="mob-item" onclick="goApp('analytics',null);closeMobMenu()">Analytics</button>
    <button class="mob-item" onclick="goApp('garden',null);closeMobMenu()">My Garden</button>
    <button class="mob-item" onclick="goApp('store',null);closeMobMenu()">Store</button>
    <button class="mob-item" onclick="goApp('chatbot',null);closeMobMenu()">AI Assistant</button>
  </div>
</div>

<!-- ══════════════════════════════════════
     HOME PAGE
══════════════════════════════════════ -->
<div class="page active" id="page-home">
<div class="home">

  <section class="hero" id="hero">
    <div class="hero-grid"></div>
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>
    <div class="orb orb4"></div>
    <div class="hero-dots" id="hdots"></div>
    <svg class="wm-tl" width="320" height="320" viewBox="0 0 200 200" fill="none"><path d="M100 15 C38 15 12 60 12 100 C12 152 55 188 100 188 C145 188 188 152 188 100 C188 60 162 15 100 15Z" fill="#22c55e"/><circle cx="100" cy="100" r="40" fill="#4ade80"/></svg>
    <svg class="wm-tr" width="160" height="160" viewBox="0 0 100 100" fill="none"><path d="M50 8 Q92 8 92 50 Q92 92 50 92 Q8 92 8 50 Q8 28 28 18" stroke="#22c55e" stroke-width="7" stroke-linecap="round" fill="none"/><path d="M78 78 Q92 50 72 28" stroke="#22c55e" stroke-width="6" stroke-linecap="round" fill="none"/></svg>

    <div class="hero-inner">
      <div class="hero-pill">
        <span class="pill-dot"></span>
        GreenFlow Analytics Platform
        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" opacity=".5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </div>
      <h1 class="hero-h1">GreenFlow</h1>
      <div class="hero-rule"></div>
      <p class="hero-sub">A structured way to analyze and visualize hydropower data — turning raw datasets into clear, decision-ready insights through clean dashboards and automated analysis.</p>
      <div class="hero-actions">
        <button class="btn-prime" onclick="goApp('dashboard',null)">
          View Dashboard
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
        <button class="btn-ghost" onclick="goHomeAndScroll('how-sec')">
          How It Works
        </button>
      </div>
    </div>

  </section>

  <!-- STATS -->
  <div style="background:var(--bg);padding:72px 40px">
    <div style="max-width:940px;margin:0 auto">
      <div class="stats-row">
        <div class="stat-c rv">
          <div class="stat-ico"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"><rect x="2" y="7" width="20" height="10" rx="2"/><path d="M22 11h1a1 1 0 0 1 0 2h-1"/></svg></div>
          <div class="stat-n">99.4%</div><div class="stat-l">System Uptime</div>
        </div>
        <div class="stat-c rv" style="transition-delay:.1s">
          <div class="stat-ico"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg></div>
          <div class="stat-n">10K+</div><div class="stat-l">Data Points Analyzed</div>
        </div>
        <div class="stat-c rv" style="transition-delay:.2s">
          <div class="stat-ico"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg></div>
          <div class="stat-n">24/7</div><div class="stat-l">Real-time Monitoring</div>
        </div>
      </div>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <div style="background:var(--white);padding:88px 40px" id="how-sec">
    <div style="max-width:1000px;margin:0 auto">
      <div class="sec-ctr rv" style="margin-bottom:52px">
        <span class="sec-lbl">How It Works</span>
        <h2 class="sec-h">Four steps to clear insight</h2>
        <p class="sec-p">From raw data to actionable decisions — simply and efficiently.</p>
      </div>
      <div class="steps">
        <div class="step rv" style="transition-delay:.04s"><div class="step-n">1</div><h3>Upload Data</h3><p>Upload operational or generation datasets through the interface.</p></div>
        <div class="step rv" style="transition-delay:.1s"><div class="step-n">2</div><h3>Automated Analysis</h3><p>Data processed using reliable Python-based analytics.</p></div>
        <div class="step rv" style="transition-delay:.16s"><div class="step-n">3</div><h3>Visualize Insights</h3><p>Explore structured dashboards presenting trends and summaries.</p></div>
        <div class="step rv" style="transition-delay:.22s"><div class="step-n">4</div><h3>Apply Findings</h3><p>Use insights to evaluate performance and support decisions.</p></div>
      </div>
    </div>
  </div>

  <!-- CONTACT -->
  <div style="background:var(--bg);padding:88px 40px" id="contact-sec">
    <div style="max-width:1000px;margin:0 auto">
      <div class="sec-ctr rv" style="margin-bottom:32px">
        <span class="sec-lbl">Get In Touch</span>
        <h2 class="sec-h">Contact Us</h2>
        <p class="sec-p">Have questions about the platform or garden packages? We'd love to hear from you.</p>
      </div>
      <div class="contact-form rv">
        <div class="fg-row"><div class="fg"><label>First Name</label><input type="text" placeholder="John"/></div><div class="fg"><label>Last Name</label><input type="text" placeholder="Doe"/></div></div>
        <div class="fg"><label>Email</label><input type="email" placeholder="john@example.com"/></div>
        <div class="fg"><label>Subject</label><input type="text" placeholder="Inquiry about..."/></div>
        <div class="fg"><label>Message</label><textarea placeholder="Tell us more..."></textarea></div>
        <button class="btn-prime" style="width:100%;padding:13px;font-size:.92rem;justify-content:center" onclick="showToast('Message sent! We\'ll be in touch soon.')">
          Send Message
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="foot-in">
      <div class="foot-grid">
        <div class="foot-brand">
          <h3>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--g5)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22V12"/><path d="M12 12C12 7 7 3 2 5c3 3 5 7 10 7z"/><path d="M12 12c0-5 5-9 10-7-3 3-5 7-10 7z"/></svg>
            GreenFlow Hydro
          </h3>
          <p style="font-weight:600;color:rgba(255,255,255,.82);font-size:.82rem;margin-bottom:4px">Hydropower Data Analysis Dashboard</p>
          <p style="color:rgba(255,255,255,.62);font-size:.79rem;margin-bottom:8px">with Integrated Garden Store and AI Assistant</p>
          <p>A unified platform combining data analytics, a sustainable garden store, and an AI-powered assistant to support data understanding.</p>
        </div>
        <div class="foot-col"><h4>Platform</h4><a onclick="goApp('dashboard',null)">Dashboard</a><a onclick="goApp('analytics',null)">Analytics</a><a onclick="goApp('garden',null)">My Garden</a><a onclick="goApp('store',null)">Store</a></div>
        <div class="foot-col"><h4>Features</h4><a>Data Upload</a><a>Auto Analysis</a><a>Visualizations</a><a onclick="goApp('chatbot',null)">AI Assistant</a></div>
        <div class="foot-col"><h4>Company</h4><a>About</a><a onclick="goHomeAndScroll('contact-sec')">Contact</a><a>Built with Python</a><a>Streamlit</a></div>
      </div>
      <div class="foot-bot"><p>© 2026 GreenFlow Hydro — A lightweight analytics interface for visualizing and understanding datasets. Built using Python and Streamlit.</p></div>
    </div>
  </footer>
</div>
</div>

<!-- ══════════════════════════════════════
     APP SHELL (sidebar + all inner pages)
══════════════════════════════════════ -->
<div class="page" id="page-app">
<div class="app-shell">

  <!-- ── SIDEBAR ── -->
  <aside class="sidebar" id="sidebar">
    <div class="sb-header">
      <div class="sb-brand-ico">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22V12"/><path d="M12 12C12 7 7 3 2 5c3 3 5 7 10 7z"/><path d="M12 12c0-5 5-9 10-7-3 3-5 7-10 7z"/></svg>
      </div>
      <span class="sb-brand-txt">GreenFlow</span>
      <button class="sb-toggle-btn" id="sbToggle" onclick="toggleSidebar()" title="Toggle sidebar">
        <svg id="sbArrow" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"/></svg>
      </button>
    </div>

    <nav class="sb-nav">
      <div class="sb-group-lbl">Analytics</div>
      <button class="sb-item active" id="si-dashboard" onclick="showInner('dashboard',this)">
        <div class="sb-ico">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2" stroke-linecap="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
        </div>
        <span class="sb-label">Dashboard</span>
      </button>
      <button class="sb-item" id="si-analytics" onclick="showInner('analytics',this)">
        <div class="sb-ico">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2" stroke-linecap="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
        </div>
        <span class="sb-label">Analytics</span>
      </button>

      <div class="sb-group-lbl">Garden</div>
      <button class="sb-item" id="si-garden" onclick="showInner('garden',this)">
        <div class="sb-ico">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2" stroke-linecap="round"><path d="M12 22V12"/><path d="M12 12C12 7 7 3 2 5c3 3 5 7 10 7z"/><path d="M12 12c0-5 5-9 10-7-3 3-5 7-10 7z"/></svg>
        </div>
        <span class="sb-label">My Garden</span>
        <span class="sb-badge" id="sb-badge">0</span>
      </button>

      <div class="sb-group-lbl">Commerce</div>
      <button class="sb-item" id="si-store" onclick="showInner('store',this)">
        <div class="sb-ico">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2" stroke-linecap="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        </div>
        <span class="sb-label">Store</span>
      </button>

      <div class="sb-group-lbl">Assistant</div>
      <button class="sb-item" id="si-chatbot" onclick="showInner('chatbot',this)">
        <div class="sb-ico">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2" stroke-linecap="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        </div>
        <span class="sb-label">AI Assistant</span>
      </button>

      <div class="sb-group-lbl">Features</div>
      <div class="sb-feat-card">
        <div class="sb-feat-item">
          <div class="sb-feat-ico" style="background:linear-gradient(135deg,#0f5c44,#22c55e)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
          </div>
          <div class="sb-feat-txt">
            <span class="sb-feat-name">Data Analysis</span>
            <span class="sb-feat-sub">Energy datasets</span>
          </div>
        </div>
        <div class="sb-feat-item">
          <div class="sb-feat-ico" style="background:linear-gradient(135deg,#0e9f82,#34d399)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
          </div>
          <div class="sb-feat-txt">
            <span class="sb-feat-name">Real-time Insights</span>
            <span class="sb-feat-sub">Live monitoring</span>
          </div>
        </div>
        <div class="sb-feat-item">
          <div class="sb-feat-ico" style="background:linear-gradient(135deg,#0d8c8c,#2dd4bf)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
          </div>
          <div class="sb-feat-txt">
            <span class="sb-feat-name">Auto Workflow</span>
            <span class="sb-feat-sub">Python analytics</span>
          </div>
        </div>
        <div class="sb-feat-item">
          <div class="sb-feat-ico" style="background:linear-gradient(135deg,#15803d,#4ade80)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          </div>
          <div class="sb-feat-txt">
            <span class="sb-feat-name">Sustainability</span>
            <span class="sb-feat-sub">Renewable focus</span>
          </div>
        </div>
      </div>
    </nav>

    <div class="sb-footer">
      <div class="sb-footer-txt">GreenFlow v2.0 · © 2026</div>
    </div>
  </aside>

  <!-- MOBILE SIDEBAR OVERLAY BG -->
  <div class="mob-sb-overlay" id="mobSbOverlay" onclick="closeMobileSidebar()"></div>

  <!-- ── APP CONTENT ── -->
  <div class="app-content" id="appcontent">

    <!-- DASHBOARD -->
    <div id="inner-dashboard" class="inner-view">
      <div class="ibar">
        <div class="ibar-left">
          <button class="mob-sb-btn" onclick="openMobileSidebar()" title="Menu">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--g2)" stroke-width="2.2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
          </button>
          <h2>Dashboard</h2>
          <span class="badge-live"><span class="ldot"></span>Live</span>
        </div>
        <span class="badge-live">System Online</span>
      </div>
      <div class="ibody">
        <div class="g4">
          <div class="dc"><div class="dl">Total Generation</div><div class="dv">29.6 GWh</div><div class="ds">↑ 8.2% this month</div></div>
          <div class="dc"><div class="dl">Avg Efficiency</div><div class="dv">89.2%</div><div class="ds">↑ 3.1% vs last</div></div>
          <div class="dc"><div class="dl">Active Turbines</div><div class="dv">12/14</div><div class="ds" style="color:var(--g4)">Optimal</div></div>
          <div class="dc"><div class="dl">Garden Plants</div><div class="dv" id="dpcnt">0</div><div class="ds">Sustainable growth</div></div>
        </div>
        <div class="g2">
          <div class="dc">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:13px">
              <h3 style="margin:0">Generation Efficiency Trends</h3>
              <span class="badge-live"><span class="ldot"></span>Live</span>
            </div>
            <div style="height:195px;position:relative"><canvas id="dBar"></canvas></div>
          </div>
          <div class="dc">
            <h3>Flow Rate Distribution</h3>
            <div class="br"><div class="bl">Turbine A</div><div class="btr"><div class="bfi" style="width:87%"></div></div><span class="bpc">87%</span></div>
            <div class="br"><div class="bl">Turbine B</div><div class="btr"><div class="bfi" style="width:72%"></div></div><span class="bpc">72%</span></div>
            <div class="br"><div class="bl">Turbine C</div><div class="btr"><div class="bfi" style="width:91%"></div></div><span class="bpc">91%</span></div>
            <div class="br"><div class="bl">Garden</div><div class="btr"><div class="bfi" style="width:15%"></div></div><span class="bpc">15%</span></div>
            <div class="br"><div class="bl">Cooling</div><div class="btr"><div class="bfi" style="width:43%"></div></div><span class="bpc">43%</span></div>
          </div>
        </div>
        <div class="g3">
          <div class="dc"><div class="dl">CO₂ Avoided</div><div class="dv">1,247 t</div><div class="ds">This year</div></div>
          <div class="dc"><div class="dl">Revenue</div><div class="dv">₹8.4L</div><div class="ds">↑ 18% monthly</div></div>
          <div class="dc"><div class="dl">System Uptime</div><div class="dv">99.4%</div><div class="ds" style="color:var(--g4)">Excellent</div></div>
        </div>
      </div>
    </div>

    <!-- ANALYTICS -->
    <div id="inner-analytics" class="inner-view" style="display:none">
      <div class="ibar"><h2>Analytics</h2><span class="badge-live">12 Months</span></div>
      <div class="ibody">
        <div class="dc" style="margin-bottom:16px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:13px"><h3>Monthly Generation Analytics (2024–2025)</h3></div>
          <div style="height:240px;position:relative"><canvas id="aChart"></canvas></div>
        </div>
        <div class="g3">
          <div class="dc"><div class="dl">Peak Output</div><div class="dv">3.1 MW</div><div class="ds">July 2024</div></div>
          <div class="dc"><div class="dl">Avg Flow Rate</div><div class="dv">812 m³</div><div class="ds">Annual average</div></div>
          <div class="dc"><div class="dl">Capacity Factor</div><div class="dv">76%</div><div class="ds">↑ 5% YoY</div></div>
        </div>
      </div>
    </div>

    <!-- GARDEN -->
    <div id="inner-garden" class="inner-view" style="display:none">
      <div class="ibar"><h2>My Garden</h2><button class="btn-sm" onclick="openAdd()">+ Add Plant</button></div>
      <div class="ibody">
        <div class="g4" style="margin-bottom:16px">
          <div class="dc" style="border-color:rgba(34,197,94,.25)"><div class="dl">Water Usage</div><div class="dv" id="gw" style="font-size:1.3rem">0 L</div><div class="ds">per day</div></div>
          <div class="dc"><div class="dl">Total Plants</div><div class="dv" id="gtot">0</div></div>
          <div class="dc"><div class="dl">Vegetables</div><div class="dv" id="gveg">0</div></div>
          <div class="dc"><div class="dl">Fruits</div><div class="dv" id="gfru" style="color:#ea580c">0</div></div>
        </div>
        <div class="dc" style="margin-bottom:16px">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px"><h3 style="margin:0">My Plants</h3><button class="btn-sm" onclick="openAdd()">+ Add Plant</button></div>
          <div id="gemp" class="empty-s"><div class="ei">🌾</div><h4>Your garden is empty</h4><p>Add plants from the catalog below</p></div>
          <div class="gg" id="ggrid" style="display:none"></div>
        </div>
        <div class="dc">
          <h3 style="margin-bottom:11px">Plant Catalog — Click to Add</h3>
          <div class="g-filter" id="gfi"><button class="gtag on" onclick="fG('all',this)">All</button><button class="gtag" onclick="fG('vegetable',this)">Vegetables</button><button class="gtag" onclick="fG('fruit',this)">Fruits</button><button class="gtag" onclick="fG('herb',this)">Herbs</button></div>
          <div class="cat-grid" id="gcatalog"></div>
        </div>
      </div>
    </div>

    <!-- STORE -->
    <div id="inner-store" class="inner-view" style="display:none">
      <div class="ibar"><h2>Store</h2></div>
      <div class="ibody">
        <div class="store-hero">
          <h2>Garden Starter Packages</h2>
          <p>Choose the perfect kit to grow fresh produce powered by clean energy</p>
        </div>
        <div class="pkg-grid">
          <div class="pkg">
            <div class="pname">Starter Kit</div>
            <div class="pprice">₹9,999 <span>/ kit</span></div>
            <div class="pdesc">Perfect for beginners. Includes pump, reservoir, and nutrients.</div>
            <div class="pcnt"><div class="pn">4</div><p>Plants Included</p></div>
            <ul class="plist"><li>Pump (50W)</li><li>15L Reservoir Tank</li><li>Nutrient Starter Pack</li><li>4 Plant Net Pots</li><li>pH Testing Kit</li><li>Beginner's Guide</li></ul>
            <button class="pbtn pbtn-o" onclick="openPay('Starter Kit','₹9,999',9999,4)">Purchase Now</button>
          </div>
          <div class="pkg best">
            <div class="ptag">Most Popular</div>
            <div class="pname">Professional Setup</div>
            <div class="pprice">₹24,999 <span>/ kit</span></div>
            <div class="pdesc">High-yield system with automated lighting control.</div>
            <div class="pcnt"><div class="pn">12</div><p>Plants Included</p></div>
            <ul class="plist"><li>Auto Lighting Control</li><li>45L Multi-chamber Reservoir</li><li>Professional Nutrients</li><li>12 Plant Net Pots</li><li>Digital pH/EC Meter</li><li>Mobile App Monitoring</li><li>Temperature Sensor</li></ul>
            <button class="pbtn pbtn-g" onclick="openPay('Professional Setup','₹24,999',24999,12)">Purchase Now</button>
          </div>
          <div class="pkg">
            <div class="pname">Commercial System</div>
            <div class="pprice">₹59,999 <span>/ kit</span></div>
            <div class="pdesc">Full-scale farm setup with IoT monitoring capabilities.</div>
            <div class="pcnt"><div class="pn">30</div><p>Plants Included</p></div>
            <ul class="plist"><li>Full IoT Monitoring Suite</li><li>120L Industrial Reservoir</li><li>Advanced Nutrient Dosing</li><li>30 Plant Net Pots</li><li>Automated pH/EC Dosing</li><li>Climate Control Integration</li><li>Real-time Analytics</li><li>24/7 Priority Support</li></ul>
            <button class="pbtn pbtn-o" onclick="openPay('Commercial System','₹59,999',59999,30)">Purchase Now</button>
          </div>
        </div>
      </div>
    </div>

    <!-- CHATBOT -->
    <div id="inner-chatbot" class="inner-view" style="display:none">
      <div class="ibar"><h2>AI Assistant</h2><span class="badge-live">GreenFlow AI</span></div>
      <div class="ibody" style="padding-bottom:0">
        <div class="chat-wrap">
          <div class="chat-side">
            <div class="dc" style="padding:12px">
              <div style="font-size:.64rem;font-weight:700;color:var(--txt4);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">Quick Topics</div>
              <button class="ctopic" onclick="sQ('How is the system performing?')">System Status</button>
              <button class="ctopic" onclick="sQ('What vegetables grow best?')">Best Vegetables</button>
              <button class="ctopic" onclick="sQ('How often should I water my plants?')">Watering Guide</button>
              <button class="ctopic" onclick="sQ('What is the current efficiency?')">Efficiency Data</button>
              <button class="ctopic" onclick="sQ('How do I balance nutrients?')">Nutrient Tips</button>
              <button class="ctopic" onclick="sQ('Which fruits can I grow?')">Fruit Advice</button>
              <button class="ctopic" onclick="sQ('Which package should I choose?')">Package Guide</button>
            </div>
          </div>
          <div class="chat-main">
            <div class="msgs" id="msgs">
              <div class="msg ai"><div class="mav ai">G</div><div><div class="mbub">Hello! I'm the <strong>GreenFlow AI</strong>. I can help with:<br/><br/>— Analytics & generation data<br/>— Garden care & plant tips<br/>— Store package advice<br/><br/>What would you like to know?</div><div class="mtime">GreenFlow AI · Just now</div></div></div>
            </div>
            <div class="cinp">
              <input type="text" id="cin" placeholder="Ask about analytics, garden tips, or products…" onkeydown="if(event.key==='Enter')sendChat()"/>
              <button class="btn-sm" onclick="sendChat()">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /app-content -->
</div><!-- /app-shell -->
</div><!-- /page-app -->

<!-- ADD PLANT MODAL -->
<div id="add-m" style="display:none"><div class="mover" onclick="if(event.target===this)closeM('add-m')"><div class="modal"><button class="mcls" onclick="closeM('add-m')">✕</button><h3>Add Plant to Garden</h3><div class="fg"><label>Plant Name</label><input type="text" id="pna" placeholder="e.g. Cherry Tomato"/></div><div class="fg-row"><div class="fg"><label>Type</label><select id="pty"><option value="vegetable">Vegetable</option><option value="fruit">Fruit</option><option value="herb">Herb</option></select></div><div class="fg"><label>Emoji</label><input type="text" id="pem" placeholder="🍅" maxlength="2"/></div></div><div class="fg"><label>Growth Stage</label><select id="pst"><option value="seed">Seed</option><option value="sprout">Sprout</option><option value="grow">Growing</option><option value="harvest">Harvest Ready</option></select></div><div class="fg"><label>Watering Schedule</label><select id="pwa"><option>Every day</option><option>Every 2 days</option><option>Every 3 days</option><option>Twice a day</option></select></div><button class="btn-prime" style="width:100%;padding:11px;justify-content:center" onclick="addPlant()">Add to Garden</button></div></div></div>

<!-- PAYMENT MODAL -->
<div id="pay-m" style="display:none"><div class="mover" onclick="if(event.target===this)closeM('pay-m')"><div class="modal" style="max-width:450px"><button class="mcls" onclick="closeM('pay-m')">✕</button><h3 id="ptitle">Complete Purchase</h3><div id="pbody"><div class="pnote">Test Mode — Use card: 4242 4242 4242 4242. No real charges.</div><div class="ord"><h4>Order Summary</h4><div class="orow"><span id="pn2">—</span><span id="pp2">—</span></div><div class="orow"><span>Plants</span><span id="ppl">—</span></div><div class="orow"><span>Delivery</span><span style="color:var(--g4)">FREE</span></div><div class="orow otot"><span>Total</span><span id="ptot">—</span></div></div><div class="fg"><label>Cardholder Name</label><input type="text" placeholder="Full name"/></div><div class="fg"><label>Card Number</label><input type="text" placeholder="4242 4242 4242 4242" maxlength="19" oninput="fc(this)"/></div><div class="fg-row"><div class="fg"><label>Expiry</label><input type="text" placeholder="MM/YY" maxlength="5" oninput="fe(this)"/></div><div class="fg"><label>CVV</label><input type="text" placeholder="123" maxlength="3"/></div></div><div class="fg"><label>Email</label><input type="email" placeholder="you@example.com"/></div><button class="btn-prime" style="width:100%;padding:12px;justify-content:center" onclick="procPay()">Pay <span id="pamt"></span></button></div><div id="psucc" style="display:none" class="succ"><div class="si">✅</div><h3>Order Confirmed!</h3><p id="smsg"></p><button class="btn-sm" style="margin-top:14px" onclick="closeM('pay-m')">Continue</button></div></div></div></div>

<!-- TOAST -->
<div class="toast-el" id="toastEl" style="display:none"><span id="tico">✅</span><span id="tmsg"></span></div>

<script>
// ══ SIDEBAR STATE ══
let sbOpen = true;
function toggleSidebar(){
  sbOpen = !sbOpen;
  const sb = document.getElementById('sidebar');
  const ac = document.getElementById('appcontent');
  const arrow = document.getElementById('sbArrow');
  sb.classList.toggle('collapsed', !sbOpen);
  ac.classList.toggle('expanded', !sbOpen);
  // Flip arrow direction
  arrow.innerHTML = sbOpen
    ? '<path d="M15 18l-6-6 6-6"/>'
    : '<path d="M9 18l6-6-6-6"/>';
}

// ══ MOBILE MENU ══
let mobMenuOpen = false;
function toggleMobileMenu(){
  mobMenuOpen = !mobMenuOpen;
  const menu = document.getElementById('mobMenu');
  const ico = document.getElementById('hamIco');
  if(mobMenuOpen){
    menu.classList.add('open');
    ico.innerHTML='<line x1="6" y1="6" x2="18" y2="18"/><line x1="6" y1="18" x2="18" y2="6"/>';
  } else {
    menu.classList.remove('open');
    ico.innerHTML='<line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>';
  }
}
function closeMobMenu(){
  mobMenuOpen=false;
  document.getElementById('mobMenu').classList.remove('open');
  document.getElementById('hamIco').innerHTML='<line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>';
}
// Close mobile menu when clicking overlay background
document.addEventListener('click',function(e){
  if(e.target.id==='mobMenu') closeMobMenu();
});

// Mobile sidebar overlay
function openMobileSidebar(){
  document.getElementById('sidebar').classList.add('mob-open');
  const ov=document.getElementById('mobSbOverlay');
  if(ov) ov.classList.add('vis');
}
function closeMobileSidebar(){
  document.getElementById('sidebar').classList.remove('mob-open');
  const ov=document.getElementById('mobSbOverlay');
  if(ov) ov.classList.remove('vis');
}

// ══ NAVIGATION ══
let curInner = 'dashboard';
let dBarInit=false, aChartInit=false;

function goHome(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-home').classList.add('active');
  document.querySelectorAll('.tnl').forEach(b=>b.classList.remove('act'));
  document.querySelector('.tnl').classList.add('act');
  closeMobileSidebar();
  window.scrollTo(0,0);
  setTimeout(()=>{spawnDots();setupReveal();},80);
}

function goHomeAndScroll(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-home').classList.add('active');
  document.querySelectorAll('.tnl').forEach(b=>b.classList.remove('act'));
  closeMobileSidebar();
  setTimeout(()=>{
    const el=document.getElementById(id);
    if(el) el.scrollIntoView({behavior:'smooth'});
    spawnDots();setupReveal();
  },50);
}

function goApp(section, navEl){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-app').classList.add('active');
  document.querySelectorAll('.tnl').forEach(b=>b.classList.remove('act'));
  closeMobileSidebar();
  window.scrollTo(0,0);
  showInner(section, document.getElementById('si-'+section));
  if(section==='garden') renderCat();
}

function showInner(section, sbEl){
  // hide all inner views
  document.querySelectorAll('.inner-view').forEach(v=>v.style.display='none');
  document.getElementById('inner-'+section).style.display='block';
  // update sidebar active
  document.querySelectorAll('.sb-item').forEach(b=>b.classList.remove('active'));
  if(sbEl) sbEl.classList.add('active');
  curInner = section;
  closeMobileSidebar();
  if(section==='dashboard') setTimeout(initDBar,80);
  if(section==='analytics') setTimeout(initAChart,80);
  if(section==='garden') renderCat();
}

// topnav scroll
window.addEventListener('scroll',()=>document.getElementById('topnav').classList.toggle('shad',scrollY>8));

// ══ DOTS ══
function spawnDots(){
  const c=document.getElementById('hdots');
  if(c&&c.children.length)return;if(!c)return;
  [[8,12,2.5],[22,6,2],[38,18,3],[58,9,2],[74,15,2.5],[88,6,2],[95,30,2.5],
   [5,38,2],[15,55,3],[28,42,2],[48,50,2.5],[68,44,2],[84,48,3],[94,62,2],
   [3,68,2.5],[19,76,2],[35,62,3],[54,72,2],[70,80,2.5],[88,66,2],[12,88,2],
   [42,86,2.5],[64,91,2],[80,84,3],[95,78,2]
  ].forEach(([x,y,s])=>{
    const d=document.createElement('div');d.className='hdot';
    d.style.cssText=`left:${x}%;top:${y}%;width:${s}px;height:${s}px;animation-duration:${4+Math.random()*5}s;animation-delay:${Math.random()*4}s`;
    c.appendChild(d);
  });
}
setTimeout(spawnDots,60);

// ══ SCROLL REVEAL ══
function setupReveal(){
  const obs=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting)e.target.classList.add('vis')}),{threshold:.1});
  document.querySelectorAll('.rv,.stat-c,.step,.contact-form').forEach(el=>obs.observe(el));
}
setTimeout(setupReveal,80);

// ══ CHARTS ══
const CD={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}}};
function cg(ctx,t,b){const g=ctx.createLinearGradient(0,0,0,200);g.addColorStop(0,t);g.addColorStop(1,b);return g}

function initDBar(){if(dBarInit)return;dBarInit=true;
  const ctx=document.getElementById('dBar').getContext('2d');
  new Chart(ctx,{type:'bar',data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],datasets:[{label:'Efficiency %',data:[82,78,85,91,88,95,90],backgroundColor:cg(ctx,'rgba(23,136,95,.88)','rgba(23,136,95,.28)'),borderRadius:9,borderSkipped:false}]},options:{...CD,scales:{y:{min:0,max:100,grid:{color:'rgba(0,0,0,.04)'},ticks:{color:'#5a9070',font:{size:10,family:'DM Sans'}}},x:{grid:{display:false},ticks:{color:'#5a9070',font:{size:10,family:'DM Sans'}}}}}});
}
function initAChart(){if(aChartInit)return;aChartInit=true;
  const ctx=document.getElementById('aChart').getContext('2d');
  new Chart(ctx,{type:'bar',data:{labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],datasets:[{label:'GWh',data:[22,19,25,28,26,30,31,29,27,24,21,20],backgroundColor:cg(ctx,'rgba(23,136,95,.88)','rgba(23,136,95,.26)'),borderRadius:7,borderSkipped:false},{label:'Efficiency %',data:[85,82,87,89,88,91,92,90,88,86,83,81],type:'line',borderColor:'#22c55e',backgroundColor:'transparent',tension:.42,pointBackgroundColor:'#22c55e',pointRadius:4,yAxisID:'y1'}]},options:{...CD,scales:{y:{grid:{color:'rgba(0,0,0,.04)'},ticks:{color:'#5a9070',font:{size:10,family:'DM Sans'}}},y1:{position:'right',min:70,max:100,grid:{display:false},ticks:{color:'#5a9070',font:{size:10,family:'DM Sans'}}},x:{grid:{display:false},ticks:{color:'#5a9070',font:{size:10,family:'DM Sans'}}}},plugins:{legend:{display:true,labels:{color:'#1e5c3c',font:{size:11,family:'DM Sans'}}}}}});
}

// ══ GARDEN ══
const CAT=[
  {e:'🍅',n:'Tomato',t:'vegetable'},{e:'🥒',n:'Cucumber',t:'vegetable'},{e:'🌶️',n:'Chilli',t:'vegetable'},{e:'🥬',n:'Lettuce',t:'vegetable'},
  {e:'🌿',n:'Spinach',t:'vegetable'},{e:'🥕',n:'Carrot',t:'vegetable'},{e:'🫑',n:'Capsicum',t:'vegetable'},{e:'🥦',n:'Broccoli',t:'vegetable'},
  {e:'🌽',n:'Corn',t:'vegetable'},{e:'🍆',n:'Brinjal',t:'vegetable'},{e:'🧅',n:'Onion',t:'vegetable'},{e:'🥔',n:'Potato',t:'vegetable'},
  {e:'🌱',n:'Mint',t:'herb'},{e:'🌿',n:'Basil',t:'herb'},{e:'🪴',n:'Coriander',t:'herb'},{e:'🌾',n:'Lemongrass',t:'herb'},
  {e:'🍓',n:'Strawberry',t:'fruit'},{e:'🍋',n:'Lemon',t:'fruit'},{e:'🍇',n:'Grapes',t:'fruit'},{e:'🍉',n:'Watermelon',t:'fruit'},
  {e:'🍎',n:'Apple',t:'fruit'},{e:'🫐',n:'Blueberry',t:'fruit'},{e:'🥭',n:'Mango',t:'fruit'},{e:'🍈',n:'Melon',t:'fruit'},
];
let plants=[],gflt='all';
const wMap={'Every day':2.5,'Every 2 days':1.3,'Every 3 days':.9,'Twice a day':5};
const stP={seed:10,sprout:35,grow:65,harvest:100};
const stL={seed:'Seed',sprout:'Sprout',grow:'Growing',harvest:'Harvestable'};
const stC={seed:'bs',sprout:'bp',grow:'bg',harvest:'bh'};

function fG(t,el){gflt=t;document.querySelectorAll('.gtag').forEach(b=>b.classList.remove('on'));el.classList.add('on');renderCat()}
function renderCat(){
  const items=gflt==='all'?CAT:CAT.filter(p=>p.t===gflt);
  document.getElementById('gcatalog').innerHTML=items.map(p=>`<div class="ccard" onclick="fillAdd('${p.e}','${p.n}','${p.t}')"><div class="ce">${p.e}</div><div class="cn">${p.n}</div><div class="ct">${p.t.charAt(0).toUpperCase()+p.t.slice(1)}</div></div>`).join('');
}
function fillAdd(e,n,t){document.getElementById('pem').value=e;document.getElementById('pna').value=n;document.getElementById('pty').value=t;openAdd()}
function openAdd(){document.getElementById('add-m').style.display='flex'}
function addPlant(){
  const n=document.getElementById('pna').value.trim()||'My Plant',t=document.getElementById('pty').value;
  const e=document.getElementById('pem').value||'🌿',s=document.getElementById('pst').value,w=document.getElementById('pwa').value;
  plants.push({id:Date.now(),n,t,e,s,w});closeM('add-m');renderGarden();updG();showToast(n+' added to garden!');
}
function remPlant(id){plants=plants.filter(p=>p.id!==id);renderGarden();updG();showToast('Plant removed')}
function advStage(id){
  const p=plants.find(x=>x.id===id);if(!p)return;
  const st=['seed','sprout','grow','harvest'],i=st.indexOf(p.s);
  if(i<st.length-1)p.s=st[i+1];renderGarden();showToast('Advanced to '+stL[p.s]);
}
function renderGarden(){
  const grid=document.getElementById('ggrid'),emp=document.getElementById('gemp');
  if(!plants.length){grid.style.display='none';emp.style.display='block';return}
  grid.style.display='grid';emp.style.display='none';
  grid.innerHTML=plants.map(p=>`<div class="gp"><button class="gprm" onclick="remPlant(${p.id})" title="Remove">✕</button><div class="gpt"><div class="gpe">${p.e}</div><div class="gpi"><h4>${p.n}</h4><p>${p.t.charAt(0).toUpperCase()+p.t.slice(1)}</p></div></div><div class="gpbar"><div class="gpfi" style="width:${stP[p.s]}%"></div></div><div style="display:flex;justify-content:space-between;align-items:center"><span class="gpb ${stC[p.s]}">${stL[p.s]}</span><span style="font-size:.6rem;color:var(--txt4)">${stP[p.s]}%</span></div><div class="gpw">💧 ${p.w}</div>${p.s!=='harvest'?`<button class="gpadv" onclick="advStage(${p.id})">Advance Stage →</button>`:'<div style="color:#ea580c;font-size:.69rem;margin-top:6px;font-weight:600">✓ Ready to harvest!</div>'}</div>`).join('');
}
function updG(){
  const tot=plants.length,veg=plants.filter(p=>p.t==='vegetable').length,fr=plants.filter(p=>p.t==='fruit').length;
  const w=plants.reduce((a,p)=>{const m={seed:.5,sprout:1,grow:2,harvest:2.5}[p.s]||1;return a+(wMap[p.w]||2)*m},0);
  document.getElementById('gtot').textContent=tot;document.getElementById('gveg').textContent=veg;
  document.getElementById('gfru').textContent=fr;document.getElementById('gw').textContent=w.toFixed(1)+' L';
  const d=document.getElementById('dpcnt');if(d)d.textContent=tot;
  const b=document.getElementById('sb-badge');if(b)b.textContent=tot;
}

// ══ PAYMENT ══
let curP={};
function openPay(name,price,amt,pl){
  curP={name,price,pl};
  ['pn2','pp2','ptot'].forEach((id,i)=>document.getElementById(id).textContent=[name,price,price][i]);
  document.getElementById('ppl').textContent=pl+' plants';
  document.getElementById('pamt').textContent=price;
  document.getElementById('ptitle').textContent='Complete Purchase';
  document.getElementById('pbody').style.display='block';
  document.getElementById('psucc').style.display='none';
  document.getElementById('pay-m').style.display='flex';
}
function fc(el){let v=el.value.replace(/\D/g,'').substr(0,16);el.value=v.replace(/(\d{4})/g,'$1 ').trim()}
function fe(el){let v=el.value.replace(/\D/g,'').substr(0,4);if(v.length>2)v=v.substr(0,2)+'/'+v.substr(2);el.value=v}
function procPay(){
  document.getElementById('pbody').style.display='none';
  document.getElementById('ptitle').textContent='Order Confirmed!';
  document.getElementById('smsg').textContent=`Your ${curP.name} (${curP.pl} plants) worth ${curP.price} is confirmed. A receipt will be emailed shortly.`;
  document.getElementById('psucc').style.display='block';
  showToast('Order placed: '+curP.name);
}

// ══ CHATBOT ══
const AIR={
  power:["System generating **2.4 MW** of clean energy at **89.2% efficiency** — 12/14 turbines active. Monthly total: **29.6 GWh** (+8.2%)."],
  water:["Watering guide: seedlings daily, growing plants twice daily, mature plants every 1–2 days. Moisture sensors automate this in the system."],
  veg:["Top vegetables: **Lettuce** (30 days), **Tomatoes** (high yield), **Cucumbers** (vigorous growth), **Peppers** (long harvest), **Broccoli** (nutrient-rich)."],
  fruit:["Best fruits: **Strawberries** (easiest, shallow roots), **Dwarf Lemon** (aromatic), **Blueberries** (antioxidant-rich). Strawberries are the #1 pick for beginners."],
  nutr:["Optimal ratios: **N-P-K 3-1-2** for leafy greens, **1-3-2** for fruiting plants. Maintain EC at **1.2–2.4 mS/cm** and pH at **5.5–6.5**."],
  eff:["Efficiency is **89.2%** — excellent. CO₂ avoided: **1,247 tonnes/year**. System uptime: **99.4%**. All primary metrics are optimal."],
  store:["Starter Kit **₹9,999** (4 plants) — ideal for beginners. Professional **₹24,999** (12 plants) — best value. Commercial **₹59,999** (30 plants, full IoT) — for scale."],
  def:["I can help with analytics, garden care, or store packages. What would you like to know?"]
};
function gr(a){return a[Math.floor(Math.random()*a.length)]}
function getR(m){
  const ml=m.toLowerCase();
  if(ml.includes('power')||ml.includes('generat')||ml.includes('mw')||ml.includes('status'))return gr(AIR.power);
  if((ml.includes('water')&&ml.includes('often'))||(ml.includes('water')&&ml.includes('guide'))||ml.includes('watering'))return gr(AIR.water);
  if(ml.includes('vegetable')||ml.includes('tomato')||ml.includes('lettuce'))return gr(AIR.veg);
  if(ml.includes('fruit')||ml.includes('strawberry')||ml.includes('berry'))return gr(AIR.fruit);
  if(ml.includes('nutrient')||ml.includes('ph')||ml.includes('ec')||ml.includes('balance'))return gr(AIR.nutr);
  if(ml.includes('effic')||ml.includes('flow')||ml.includes('turbine')||ml.includes('uptime'))return gr(AIR.eff);
  if(ml.includes('package')||ml.includes('store')||ml.includes('kit')||ml.includes('buy'))return gr(AIR.store);
  return gr(AIR.def);
}
function sQ(m){document.getElementById('cin').value=m;sendChat()}
function sendChat(){
  const inp=document.getElementById('cin'),m=inp.value.trim();if(!m)return;
  appM(m,'u');inp.value='';
  const c=document.getElementById('msgs'),t=document.createElement('div');
  t.className='msg ai';t.innerHTML='<div class="mav ai">G</div><div class="mbub"><div class="typing"><span></span><span></span><span></span></div></div>';
  c.appendChild(t);sc();
  setTimeout(()=>{t.remove();appM(getR(m),'ai')},850+Math.random()*500);
}
function appM(txt,role){
  const c=document.getElementById('msgs'),d=document.createElement('div');d.className='msg '+role;
  const now=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
  d.innerHTML=`<div class="mav ${role}">${role==='ai'?'G':'U'}</div><div><div class="mbub">${txt.replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/\n/g,'<br/>')}</div><div class="mtime">${role==='ai'?'GreenFlow AI':'You'} · ${now}</div></div>`;
  c.appendChild(d);sc();
}
function sc(){const c=document.getElementById('msgs');c.scrollTop=c.scrollHeight}

// ══ MODALS & TOAST ══
function closeM(id){document.getElementById(id).style.display='none'}
let tt;
function showToast(m){
  const el=document.getElementById('toastEl');
  document.getElementById('tmsg').textContent=m;
  el.style.display='flex';clearTimeout(tt);tt=setTimeout(()=>el.style.display='none',2800);
}

// Init
renderCat();
</script>
</body>
</html>
